<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% block title %}Kisan Sahayata{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style2.css') }}"/>
  {% block head %}{% endblock %}
</head>
<body>
  <!-- Google Translate hidden container -->
  <div id="google_translate_element" style="display:none;"></div>

{% block navbar %}
<nav class="navbar navbar-expand-lg navbar-dark bg-success sticky-top">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="{{ url_for('index') }}">
      <img src="{{ url_for('static', filename='images/logo.png') }}" class="circular-logo me-2" alt="Logo" onerror="this.style.display='none'">
      <span class="fw-bold">ğŸŒ¾ Kisan Sahayata</span>
    </a>
    <div class="ms-auto d-flex align-items-center gap-2">
      <!-- Language Selector -->
      <select id="languageSwitcher" class="form-select form-select-sm lang-dropdown" style="width:auto;">
        <option value="en">ğŸ‡¬ğŸ‡§ English</option>
        <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤‚à¤¦à¥€</option>
        <option value="mr">à¤®à¤¹à¤¾ à¤®à¤°à¤¾à¤ à¥€</option>
        <option value="pa">à¨ªà©°à¨œà¨¾à¨¬à©€</option>
        <option value="te">à°¤à±†à°²à±à°—à±</option>
        <option value="ta">à®¤à®®à®¿à®´à¯</option>
      </select>
      {% block nav_extra %}
      <a href="{{ url_for('index') }}" class="nav-home-btn ms-2">
        <i class="fas fa-home me-1"></i>Home
      </a>
      {% endblock %}
    </div>
  </div>
</nav>
{% endblock %}

{% block content %}{% endblock %}

<!-- ===== FOOTER ===== -->
<footer class="bg-dark text-white py-4 mt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-5">
        <h5>ğŸŒ¾ Kisan Sahayata</h5>
        <p class="text-white-50 small" id="footerTagline">Your trusted partner in agricultural growth</p>
      </div>
      <div class="col-md-3">
        <h6>Schemes</h6>
        <ul class="list-unstyled small">
          <li><a href="{{ url_for('govscheme') }}" class="text-white-50">Government Schemes</a></li>
          <li><a href="{{ url_for('financial') }}" class="text-white-50">Financial Support</a></li>
          <li><a href="{{ url_for('insurance') }}" class="text-white-50">Insurance</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <h6>Helpline</h6>
        <p class="text-white-50 small mb-1"><i class="fas fa-phone me-1"></i> PM-KISAN: 155261</p>
        <p class="text-white-50 small mb-1"><i class="fas fa-phone me-1"></i> PMFBY: 1800-200-7710</p>
        <p class="text-white-50 small"><i class="fas fa-phone me-1"></i> Maharashtra: 1800-233-0222</p>
      </div>
    </div>
    <hr class="border-secondary"/>
    <div class="text-center">
      <small class="text-white-50" id="rightsText">Â© 2025 Kisan Sahayata. All rights reserved.</small>
    </div>
  </div>
</footer>

<!-- ===== CHATBOT ===== -->
<button class="chatbot-float-btn" id="chatbotToggle" title="Chat with Kisan Mitra">
  <i class="fas fa-robot"></i>
</button>

<div id="chatbot-box" class="chatbot-box">
  <div class="chatbot-header">
    <div class="d-flex align-items-center gap-2">
      <span class="chatbot-avatar">ğŸ¤–</span>
      <div>
        <div class="fw-bold">Kisan Mitra</div>
        <small class="opacity-75">AI Farming Assistant</small>
      </div>
    </div>
    <div class="d-flex align-items-center gap-2">
      <select id="chatLangSelect" class="form-select form-select-sm" style="width:auto;font-size:0.75rem;">
        <option value="en">EN</option>
        <option value="hi">HI</option>
        <option value="mr">MR</option>
        <option value="pa">PA</option>
        <option value="te">TE</option>
        <option value="ta">TA</option>
      </select>
      <span id="close-chatbot" style="cursor:pointer;font-size:1.2rem;">âœ–</span>
    </div>
  </div>

  <div id="chatbot-messages" class="chatbot-messages">
    <div class="bot-msg">
      Namaskar ğŸ™ I am Kisan Mitra! I can help you find government schemes, loans, and insurance. Ask me anything!
    </div>
    <div class="bot-msg quick-replies">
      <button class="quick-btn" onclick="sendQuick('PM-KISAN')">PM-KISAN</button>
      <button class="quick-btn" onclick="sendQuick('Crop Insurance')">Crop Insurance</button>
      <button class="quick-btn" onclick="sendQuick('KCC Loan')">KCC Loan</button>
      <button class="quick-btn" onclick="sendQuick('Maharashtra schemes')">MH Schemes</button>
    </div>
  </div>

  <div class="chatbot-input">
    <input type="text" id="user-input" placeholder="Ask about schemes..." autocomplete="off"/>
    <button id="send-btn"><i class="fas fa-paper-plane"></i></button>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/chatbot.js') }}"></script>
<script src="{{ url_for('static', filename='js/lang.js') }}"></script>

<script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement(
    {
      pageLanguage: 'en',
      includedLanguages: 'en,hi,mr',
      autoDisplay: false
    },
    'google_translate_element'
  );
}
</script>

<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const langSelect = document.getElementById("languageSwitcher");

  if (!langSelect) return;

  langSelect.addEventListener("change", function () {
    const lang = this.value;
    const googleCombo = document.querySelector(".goog-te-combo");

    if (googleCombo) {
      googleCombo.value = lang;
      googleCombo.dispatchEvent(new Event("change"));
    }
  });
});
</script>


{% block scripts %}{% endblock %}
</body>
</html>
